<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=1440" />
<title>Admin - HCM Chatbot RAG</title>
<style>
  :root{
    --bg:#0f1724;
    --card:#fff;
    --muted:#98a2b3;
    --accent1:#e6f2ff;
    --accent2:#fff0e6;
    --accent3:#f0ffe6;
    --accent4:#f7e6ff;
    --border:rgba(255,255,255,0.08);
    --w:1200px;
    --danger:#ff4757;
    --warning:#ffa726;
    --success:#4caf50;
  }
  
  *{
    box-sizing:border-box;
    font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
  }
  
  body{
    margin:0;
    background:linear-gradient(180deg,#071022 0%, #0b1220 100%);
    color:var(--card);
    display:flex;
    justify-content:center;
    padding:24px;
    min-height:100vh;
  }
  
  .shell{
    width:var(--w);
    max-width:100%;
  }

  /* Header */
  header.top{
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding:20px 10px;
    border-radius:10px 10px 8px 8px;
    background:rgba(255,255,255,0.02);
    border:1px solid var(--border);
    margin-bottom:18px;
    position:sticky;
    top:0;
    z-index:100;
    backdrop-filter:blur(10px);
  }
  
  .logo{
    font-weight:700;
    letter-spacing:0.6px;
  }
  
  .nav{
    display:flex;
    gap:12px;
    align-items:center;
  }
  
  .nav a{
    color:var(--muted);
    text-decoration:none;
    font-size:14px;
    padding:6px 10px;
    border-radius:6px;
    cursor:pointer;
    transition:all 0.2s ease;
  }
  
  .nav a:hover{
    background:rgba(255,255,255,0.05);
    color:var(--card);
  }
  
  .nav a.active{
    background:rgba(255,255,255,0.03);
    color:var(--card);
  }

  /* Admin specific styles */
  .page{
    display:grid;
    gap:18px;
    animation:fadeIn 0.3s ease-in;
  }
  
  @keyframes fadeIn {
    from { opacity:0; transform:translateY(10px); }
    to { opacity:1; transform:translateY(0); }
  }

  .section-title{
    margin:6px 0 12px 0;
    font-size:24px;
    font-weight:600;
    color:var(--card);
  }

  .admin-grid{
    display:grid;
    grid-template-columns:320px 1fr;
    gap:12px;
  }
  
  .upload-section{
    background:rgba(255,255,255,0.02);
    border:1px solid var(--border);
    border-radius:10px;
    padding:20px;
    position:sticky;
    top:100px;
    max-height:fit-content;
  }
  
  .upload-title{
    font-weight:700;
    margin-bottom:8px;
    color:var(--card);
  }
  
  .upload-desc{
    font-size:12px;
    color:var(--muted);
    margin-bottom:16px;
    line-height:1.4;
  }
  
  .upload-area{
    border:2px dashed var(--border);
    border-radius:8px;
    padding:24px;
    text-align:center;
    cursor:pointer;
    transition:all 0.3s ease;
    margin-bottom:16px;
    position:relative;
    overflow:hidden;
  }
  
  .upload-area:hover{
    border-color:rgba(0,120,215,0.4);
    background:rgba(0,120,215,0.05);
  }
  
  .upload-area.dragover{
    border-color:var(--success);
    background:rgba(76,175,80,0.1);
  }
  
  .upload-icon{
    font-size:32px;
    margin-bottom:12px;
    opacity:0.6;
  }
  
  .upload-text{
    font-weight:600;
    margin-bottom:4px;
    color:var(--card);
  }
  
  .upload-hint{
    font-size:12px;
    color:var(--muted);
  }
  
  .file-input{
    position:absolute;
    top:0;
    left:0;
    width:100%;
    height:100%;
    opacity:0;
    cursor:pointer;
  }
  
  .upload-progress{
    width:100%;
    height:8px;
    background:rgba(255,255,255,0.1);
    border-radius:4px;
    overflow:hidden;
    margin-bottom:12px;
    display:none;
  }
  
  .progress-bar{
    height:100%;
    background:linear-gradient(90deg, var(--success), #81c784);
    width:0%;
    transition:width 0.3s ease;
  }
  
  .upload-options{
    display:flex;
    flex-direction:column;
    gap:12px;
  }
  
  .option-group{
    display:flex;
    flex-direction:column;
    gap:6px;
  }
  
  .option-label{
    font-size:12px;
    font-weight:600;
    color:var(--card);
  }
  
  .option-select, .option-input{
    padding:8px 12px;
    background:rgba(255,255,255,0.05);
    border:1px solid var(--border);
    border-radius:6px;
    color:var(--card);
    font-size:13px;
  }
  
  .upload-button{
    width:100%;
    padding:12px;
    background:linear-gradient(135deg, var(--success), #66bb6a);
    color:white;
    border:none;
    border-radius:8px;
    font-weight:600;
    cursor:pointer;
    transition:all 0.2s ease;
    margin-top:12px;
  }
  
  .upload-button:hover{
    background:linear-gradient(135deg, #43a047, var(--success));
    transform:translateY(-1px);
  }
  
  .upload-button:disabled{
    background:rgba(255,255,255,0.1);
    color:var(--muted);
    cursor:not-allowed;
    transform:none;
  }

  .main-content{
    display:flex;
    flex-direction:column;
    gap:12px;
  }
  
  .stats-overview{
    display:grid;
    grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));
    gap:12px;
    margin-bottom:20px;
  }
  
  .stat-card{
    background:rgba(255,255,255,0.03);
    border:1px solid var(--border);
    border-radius:8px;
    padding:16px;
    text-align:center;
  }
  
  .stat-value{
    font-size:24px;
    font-weight:700;
    color:var(--card);
    margin-bottom:4px;
  }
  
  .stat-label{
    font-size:12px;
    color:var(--muted);
  }

  .management-section{
    background:rgba(255,255,255,0.02);
    border:1px solid var(--border);
    border-radius:10px;
    padding:16px;
    margin-bottom:12px;
  }
  
  .section-header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:16px;
    padding-bottom:8px;
    border-bottom:1px solid var(--border);
  }
  
  .section-header h3{
    margin:0;
    font-weight:600;
    color:var(--card);
  }
  
  .action-buttons{
    display:flex;
    gap:8px;
  }
  
  .btn{
    padding:8px 12px;
    border:none;
    border-radius:6px;
    font-size:12px;
    font-weight:600;
    cursor:pointer;
    transition:all 0.2s ease;
    text-decoration:none;
    display:inline-flex;
    align-items:center;
    gap:4px;
  }
  
  .btn-primary{
    background:rgba(0,120,215,0.8);
    color:white;
  }
  
  .btn-primary:hover{
    background:rgba(0,120,215,1);
  }
  
  .btn-warning{
    background:rgba(255,167,38,0.8);
    color:white;
  }
  
  .btn-warning:hover{
    background:rgba(255,167,38,1);
  }
  
  .btn-danger{
    background:rgba(255,71,87,0.8);
    color:white;
  }
  
  .btn-danger:hover{
    background:rgba(255,71,87,1);
  }

  .documents-table{
    width:100%;
    border-collapse:collapse;
    margin-bottom:16px;
  }
  
  .documents-table th,
  .documents-table td{
    padding:12px;
    text-align:left;
    border-bottom:1px solid var(--border);
  }
  
  .documents-table th{
    background:rgba(255,255,255,0.03);
    font-weight:600;
    color:var(--card);
    font-size:13px;
  }
  
  .documents-table td{
    font-size:13px;
    color:var(--muted);
  }
  
  .documents-table tr:hover{
    background:rgba(255,255,255,0.02);
  }
  
  .doc-name{
    color:var(--card);
    font-weight:500;
  }
  
  .doc-status{
    padding:4px 8px;
    border-radius:12px;
    font-size:11px;
    font-weight:600;
  }
  
  .status-processed{
    background:rgba(76,175,80,0.2);
    color:#4caf50;
  }
  
  .status-processing{
    background:rgba(255,167,38,0.2);
    color:#ffa726;
  }
  
  .status-error{
    background:rgba(255,71,87,0.2);
    color:#ff4757;
  }
  
  .doc-actions{
    display:flex;
    gap:4px;
  }
  
  .action-btn{
    padding:4px 8px;
    border:none;
    border-radius:4px;
    font-size:11px;
    cursor:pointer;
    transition:all 0.2s ease;
  }

  .chunk-preview{
    background:rgba(255,255,255,0.03);
    border:1px solid var(--border);
    border-radius:8px;
    padding:12px;
    max-height:200px;
    overflow-y:auto;
    margin-bottom:12px;
  }
  
  .chunk-item{
    padding:8px;
    border-radius:6px;
    margin-bottom:8px;
    background:rgba(255,255,255,0.02);
    border:1px solid var(--border);
    cursor:pointer;
    transition:all 0.2s ease;
  }
  
  .chunk-item:hover{
    background:rgba(255,255,255,0.05);
  }
  
  .chunk-text{
    font-size:12px;
    line-height:1.4;
    color:var(--card);
    margin-bottom:4px;
  }
  
  .chunk-meta{
    font-size:11px;
    color:var(--muted);
  }

  .component-box{
    background:rgba(255,255,255,0.02);
    border:1px dashed var(--border);
    padding:10px;
    border-radius:8px;
    text-align:center;
    transition:all 0.2s ease;
    font-size:12px;
    color:var(--muted);
    margin-bottom:12px;
  }

  .modal{
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
    background:rgba(0,0,0,0.7);
    display:none;
    align-items:center;
    justify-content:center;
    z-index:1000;
  }
  
  .modal.show{
    display:flex;
  }
  
  .modal-content{
    background:var(--bg);
    border:1px solid var(--border);
    border-radius:12px;
    padding:24px;
    max-width:400px;
    width:90%;
    text-align:center;
  }
  
  .modal-title{
    font-weight:700;
    margin-bottom:12px;
    color:var(--card);
  }
  
  .modal-text{
    margin-bottom:20px;
    color:var(--muted);
    line-height:1.4;
  }
  
  .modal-actions{
    display:flex;
    gap:12px;
    justify-content:center;
  }

  .small{
    font-size:12px;
    color:var(--muted);
  }

  /* Footer */
  footer{
    margin-top:40px;
    padding:12px;
    border-radius:8px;
    background:rgba(255,255,255,0.02);
    border:1px solid var(--border);
    text-align:center;
  }

  /* Scrollbar styling */
  ::-webkit-scrollbar {
    width: 6px;
  }
  
  ::-webkit-scrollbar-track {
    background: rgba(255,255,255,0.05);
    border-radius: 3px;
  }
  
  ::-webkit-scrollbar-thumb {
    background: rgba(255,255,255,0.2);
    border-radius: 3px;
  }
  
  ::-webkit-scrollbar-thumb:hover {
    background: rgba(255,255,255,0.3);
  }

  /* Responsive */
  @media (max-width: 768px) {
    .shell { width: 100%; padding: 0 12px; }
    .admin-grid { grid-template-columns: 1fr; }
    .upload-section { position: static; }
    .stats-overview { grid-template-columns: 1fr; }
  }
</style>
</head>
<body>
  <div class="shell">
    <header class="top">
      <div style="display:flex;gap:14px;align-items:center">
        <div class="logo">HCM Thought — RAG</div>
        <div class="small">desktop preview · 1440px</div>
      </div>
      <nav class="nav">
        <a href="skeleton-home.html">Home</a>
        <a href="skeleton-chat.html">Chatbot</a>
        <a href="skeleton-documents.html">Tài liệu</a>
        <a href="skeleton-articles.html">Phân tích</a>
        <a href="skeleton-admin.html" class="active">Admin</a>
      </nav>
    </header>

    <section class="page" id="admin">
      <h2 class="section-title">Quản trị hệ thống</h2>
      
      <div class="stats-overview">
        <div class="stat-card">
          <div class="stat-value">156</div>
          <div class="stat-label">Tài liệu</div>
        </div>
        <div class="stat-card">
          <div class="stat-value">2,384</div>
          <div class="stat-label">Chunks</div>
        </div>
        <div class="stat-card">
          <div class="stat-value">45</div>
          <div class="stat-label">Bài viết</div>
        </div>
        <div class="stat-card">
          <div class="stat-value">1,234</div>
          <div class="stat-label">Câu hỏi</div>
        </div>
      </div>
      
      <div class="admin-grid">
        <div class="upload-section">
          <div class="upload-title">Tải lên tài liệu</div>
          <div class="upload-desc">
            Kéo thả file PDF, OCR tự động, chia chunk và đẩy vào Qdrant vector database
          </div>
          <div class="component-box">UploadDocumentForm.tsx</div>
          
          <div class="upload-area" id="uploadArea">
            <input type="file" class="file-input" id="fileInput" accept=".pdf,.docx,.xlsx,.pptx" multiple>
            <div class="upload-icon">📁</div>
            <div class="upload-text">Kéo thả file vào đây</div>
            <div class="upload-hint">hoặc click để chọn file</div>
          </div>
          
          <div class="upload-progress" id="uploadProgress">
            <div class="progress-bar" id="progressBar"></div>
          </div>
          
          <div class="upload-options">
            <div class="option-group">
              <label class="option-label">Loại tài liệu</label>
              <select class="option-select">
                <option>Chính sách</option>
                <option>Quy định</option>
                <option>Hướng dẫn</option>
                <option>Báo cáo</option>
                <option>Other</option>
              </select>
            </div>
            
            <div class="option-group">
              <label class="option-label">Chunk size</label>
              <input type="number" class="option-input" value="1000" min="100" max="2000">
            </div>
            
            <div class="option-group">
              <label class="option-label">Overlap</label>
              <input type="number" class="option-input" value="200" min="0" max="500">
            </div>
          </div>
          
          <button class="upload-button" onclick="startUpload()">
            <span>📤</span>
            Tải lên & Xử lý
          </button>
        </div>

        <div class="main-content">
          <div class="management-section">
            <div class="section-header">
              <h3>Quản lý tài liệu</h3>
              <div class="action-buttons">
                <button class="btn btn-primary" onclick="refreshDocuments()">
                  🔄 Làm mới
                </button>
                <button class="btn btn-warning" onclick="bulkActions()">
                  ⚙️ Thao tác hàng loạt
                </button>
              </div>
            </div>
            <div class="component-box">DocumentTable.tsx</div>
            
            <table class="documents-table">
              <thead>
                <tr>
                  <th>Tên tài liệu</th>
                  <th>Loại</th>
                  <th>Kích thước</th>
                  <th>Chunks</th>
                  <th>Trạng thái</th>
                  <th>Ngày tải</th>
                  <th>Thao tác</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="doc-name">Quy định làm việc từ xa.pdf</td>
                  <td>Chính sách</td>
                  <td>2.4 MB</td>
                  <td>45</td>
                  <td><span class="doc-status status-processed">Đã xử lý</span></td>
                  <td>2 ngày trước</td>
                  <td class="doc-actions">
                    <button class="action-btn btn-primary" onclick="viewDocument(1)">👁️</button>
                    <button class="action-btn btn-warning" onclick="editDocument(1)">✏️</button>
                    <button class="action-btn btn-danger" onclick="deleteDocument(1)">🗑️</button>
                  </td>
                </tr>
                <tr>
                  <td class="doc-name">Báo cáo Q3.xlsx</td>
                  <td>Báo cáo</td>
                  <td>1.8 MB</td>
                  <td>23</td>
                  <td><span class="doc-status status-processing">Đang xử lý</span></td>
                  <td>1 giờ trước</td>
                  <td class="doc-actions">
                    <button class="action-btn btn-primary" onclick="viewDocument(2)">👁️</button>
                    <button class="action-btn btn-warning" onclick="editDocument(2)">✏️</button>
                    <button class="action-btn btn-danger" onclick="deleteDocument(2)">🗑️</button>
                  </td>
                </tr>
                <tr>
                  <td class="doc-name">Chính sách đào tạo.docx</td>
                  <td>Chính sách</td>
                  <td>956 KB</td>
                  <td>0</td>
                  <td><span class="doc-status status-error">Lỗi</span></td>
                  <td>3 ngày trước</td>
                  <td class="doc-actions">
                    <button class="action-btn btn-primary" onclick="viewDocument(3)">👁️</button>
                    <button class="action-btn btn-warning" onclick="editDocument(3)">✏️</button>
                    <button class="action-btn btn-danger" onclick="deleteDocument(3)">🗑️</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="management-section">
            <div class="section-header">
              <h3>Xem trước Chunks</h3>
              <div class="action-buttons">
                <button class="btn btn-primary" onclick="regenerateChunks()">
                  🔄 Tạo lại chunks
                </button>
              </div>
            </div>
            <div class="component-box">ChunkPreview.tsx</div>
            
            <div class="chunk-preview">
              <div class="chunk-item" onclick="selectChunk(1)">
                <div class="chunk-text">
                  "Nhân viên có thể đăng ký làm việc từ xa tối đa 3 ngày trong tuần, với điều kiện công việc cho phép và không ảnh hưởng đến hiệu suất tổng thể của đội nhóm..."
                </div>
                <div class="chunk-meta">
                  Chunk #1 • 256 tokens • Độ tương tự: 0.89
                </div>
              </div>
              
              <div class="chunk-item" onclick="selectChunk(2)">
                <div class="chunk-text">
                  "Quy trình đăng ký làm việc từ xa được thực hiện thông qua hệ thống quản lý nhân sự, với thời gian đăng ký trước ít nhất 24 giờ..."
                </div>
                <div class="chunk-meta">
                  Chunk #2 • 198 tokens • Độ tương tự: 0.84
                </div>
              </div>
              
              <div class="chunk-item" onclick="selectChunk(3)">
                <div class="chunk-text">
                  "Nhân viên làm việc từ xa cần đảm bảo kết nối internet ổn định với tốc độ tối thiểu 10 Mbps và có không gian làm việc riêng biệt..."
                </div>
                <div class="chunk-meta">
                  Chunk #3 • 224 tokens • Độ tương tự: 0.91
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Delete Confirmation Modal -->
    <div class="modal" id="deleteModal">
      <div class="modal-content">
        <div class="modal-title">Xác nhận xóa</div>
        <div class="modal-text">
          Bạn có chắc chắn muốn xóa tài liệu này? Hành động này không thể hoàn tác.
        </div>
        <div class="component-box" style="margin-bottom:16px;">DeleteConfirmModal.tsx</div>
        <div class="modal-actions">
          <button class="btn btn-primary" onclick="closeModal()">Hủy</button>
          <button class="btn btn-danger" onclick="confirmDelete()">Xóa</button>
        </div>
      </div>
    </div>

    <footer class="small">
      Footer.tsx — sources list · contact · legal
    </footer>
  </div>

  <script>
    let selectedDocumentId = null;
    
    // File upload handling
    document.getElementById('fileInput').addEventListener('change', function(e) {
      const files = e.target.files;
      if (files.length > 0) {
        showUploadProgress();
        simulateUpload();
      }
    });
    
    // Drag and drop handling
    const uploadArea = document.getElementById('uploadArea');
    
    uploadArea.addEventListener('dragover', function(e) {
      e.preventDefault();
      uploadArea.classList.add('dragover');
    });
    
    uploadArea.addEventListener('dragleave', function(e) {
      e.preventDefault();
      uploadArea.classList.remove('dragover');
    });
    
    uploadArea.addEventListener('drop', function(e) {
      e.preventDefault();
      uploadArea.classList.remove('dragover');
      
      const files = e.dataTransfer.files;
      if (files.length > 0) {
        showUploadProgress();
        simulateUpload();
      }
    });
    
    function showUploadProgress() {
      document.getElementById('uploadProgress').style.display = 'block';
    }
    
    function simulateUpload() {
      const progressBar = document.getElementById('progressBar');
      let progress = 0;
      
      const interval = setInterval(() => {
        progress += Math.random() * 20;
        if (progress >= 100) {
          progress = 100;
          clearInterval(interval);
          setTimeout(() => {
            document.getElementById('uploadProgress').style.display = 'none';
            progressBar.style.width = '0%';
            alert('Tải lên và xử lý thành công!');
          }, 500);
        }
        progressBar.style.width = progress + '%';
      }, 200);
    }
    
    function startUpload() {
      const fileInput = document.getElementById('fileInput');
      if (fileInput.files.length === 0) {
        alert('Vui lòng chọn file để tải lên!');
        return;
      }
      
      showUploadProgress();
      simulateUpload();
    }
    
    function viewDocument(docId) {
      console.log(`Viewing document: ${docId}`);
      alert(`Đang mở tài liệu ${docId}...`);
    }
    
    function editDocument(docId) {
      console.log(`Editing document: ${docId}`);
      alert(`Đang chỉnh sửa tài liệu ${docId}...`);
    }
    
    function deleteDocument(docId) {
      selectedDocumentId = docId;
      document.getElementById('deleteModal').classList.add('show');
    }
    
    function closeModal() {
      document.getElementById('deleteModal').classList.remove('show');
      selectedDocumentId = null;
    }
    
    function confirmDelete() {
      if (selectedDocumentId) {
        console.log(`Deleting document: ${selectedDocumentId}`);
        // Remove row from table (simulate)
        alert(`Đã xóa tài liệu ${selectedDocumentId}!`);
        closeModal();
      }
    }
    
    function selectChunk(chunkId) {
      // Remove active class from all chunks
      document.querySelectorAll('.chunk-item').forEach(item => {
        item.style.background = 'rgba(255,255,255,0.02)';
      });
      
      // Highlight selected chunk
      event.currentTarget.style.background = 'rgba(0,120,215,0.1)';
      
      console.log(`Selected chunk: ${chunkId}`);
    }
    
    function refreshDocuments() {
      // Add loading animation
      const button = event.currentTarget;
      const originalText = button.innerHTML;
      button.innerHTML = '⏳ Đang tải...';
      button.disabled = true;
      
      setTimeout(() => {
        button.innerHTML = originalText;
        button.disabled = false;
        alert('Đã làm mới danh sách tài liệu!');
      }, 1500);
    }
    
    function bulkActions() {
      alert('Hiển thị menu thao tác hàng loạt...');
    }
    
    function regenerateChunks() {
      alert('Đang tạo lại chunks cho tài liệu được chọn...');
    }
    
    // Close modal when clicking outside
    document.getElementById('deleteModal').addEventListener('click', function(e) {
      if (e.target === this) {
        closeModal();
      }
    });
    
    // Add loading animations
    document.addEventListener('DOMContentLoaded', function() {
      const sections = document.querySelectorAll('.management-section');
      
      sections.forEach((section, index) => {
        section.style.opacity = '0';
        section.style.transform = 'translateY(20px)';
        section.style.transition = 'all 0.3s ease';
        
        setTimeout(() => {
          section.style.opacity = '1';
          section.style.transform = 'translateY(0)';
        }, index * 150);
      });
    });
  </script>
</body>
</html>
