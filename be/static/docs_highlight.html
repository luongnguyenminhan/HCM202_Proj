<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Test /docs/highlight</title>
  <style>body{font-family:system-ui;margin:24px;max-width:900px}</style>
</head>
<body>
  <h1>/api/v1/docs/highlight</h1>
  <p>Base URL: http://localhost:8000</p>
  <form id="f">
    <label>Document ID: <input name="document_id" type="number" value="1"/></label>
    <label>Chapter ID: <input name="chapter_id" type="number"/></label>
    <label>Text: <input name="text" value="đoạn được tô sáng"/></label>
    <label>Start: <input name="start_position" type="number"/></label>
    <label>End: <input name="end_position" type="number"/></label>
    <button>Save</button>
  </form>
  <pre id="out"></pre>
  <script>
    document.getElementById('f').onsubmit = async (e) => {
      e.preventDefault();
      const fd = new FormData(e.target);
      const payload = Object.fromEntries(fd.entries());
      ['document_id','chapter_id','start_position','end_position'].forEach(k=>{ if(payload[k]==='') delete payload[k]; else payload[k]=Number(payload[k]); });
      const res = await fetch('http://localhost:8000/api/v1/docs/highlight', {
        method: 'POST', headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload)
      });
      document.getElementById('out').textContent = JSON.stringify(await res.json(), null, 2);
    };
  </script>
</body>
</html>
